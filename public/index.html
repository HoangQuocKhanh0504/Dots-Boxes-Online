<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Dots & Boxes Online</title>
  <script src="/socket.io/socket.io.js"></script>
  <script src="client.js" defer></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="icon" href="GD.png">
  <script>
(function(){
  const text = "Tr√≤ ch∆°i KhanhPC";
  const cursorChar = "‚ñå";      // k√Ω t·ª± con tr·ªè: ƒë·ªïi th√†nh "|" ho·∫∑c "_" n·∫øu th√≠ch
  const typingInterval = 140; // ms m·ªói ch·ªØ
  const cursorInterval = 500; // ms nh·∫•p nh√°y

  let i = 0;
  let cursorVisible = true;

  function renderTitle() {
    const shown = text.substring(0, Math.min(i, text.length));
    // n·∫øu cursorVisible false th√¨ ch√®n m·ªôt kho·∫£ng tr·∫Øng ƒë·ªÉ tr√°nh flicker qu√° g·∫Øt
    document.title = shown + (cursorVisible ? cursorChar : " ");
  }

  // Hi·ªáu ·ª©ng g√µ (ch·∫°y 1 l·∫ßn). ƒê·ªÉ l·∫∑p l·∫°i, uncomment ph·∫ßn ch·ªâ d·∫´n b√™n d∆∞·ªõi.
  const typer = setInterval(() => {
    if (i <= text.length) {
      renderTitle();
      i++;
    } else {
      clearInterval(typer);
      // --- Mu·ªën l·∫∑p: b·ªè comment 2 d√≤ng sau ---
      // i = 0;
      // (khi uncomment, script s·∫Ω g√µ l·∫°i t·ª´ ƒë·∫ßu)
      // --------------------------------------
    }
  }, typingInterval);

  // Nh·∫•p nh√°y con tr·ªè li√™n t·ª•c
  setInterval(() => {
    cursorVisible = !cursorVisible;
    renderTitle();
  }, cursorInterval);
})();
</script>
</head>
<div id="notification-bar" style="
    width: 100%;
    background-color: #ffcc00;
    color: #000;
    font-weight: bold;
    white-space: nowrap;
    overflow: hidden;
    height: 40px;
    line-height: 40px;
    border-bottom: 2px solid #cc9900;
    box-sizing: border-box;
    position: fixed; /* thay relative -> fixed */
    top: 0;
    left: 0;
    z-index: 9999; /* ƒë·∫£m b·∫£o n·∫±m tr√™n c√πng */
">
  <div id="scrolling-wrapper" style="
      display: inline-block;
      white-space: nowrap;
      will-change: transform;
      animation: scroll-infinite 30s linear infinite;
  ">
    <span style="padding-right: 50px;">
      Hi·ªán t·∫°i web ch·ªâ m·ªõi ƒëang ph√°t tri·ªÉn n√™n s·∫Ω c√≥ 1 s·ªë l·ªói kh√¥ng mong mu·ªën. ƒê√¥i khi css c·ªßa web s·∫Ω b·ªã m·∫•t. N·∫øu c√°c b·∫°n mu·ªën l√†m web th√¨ c√≥ th·ªÉ li√™n h·ªá m√¨nh qua website: 
      <a href="https://aikhanh.onrender.com" target="_blank" style="color: #000; text-decoration: underline;">https://aikhanh.onrender.com</a>
      ¬© KHANHPC 2025 | m·ªçi quy·ªÅn ƒë∆∞·ª£c b·∫£o l∆∞u
    </span>
    <!-- L·∫∑p l·∫°i th√™m c√°c span n·∫øu c·∫ßn -->
  </div>
</div>

<style>
@keyframes scroll-infinite {
  0% {
    transform: translateX(0);
  }
  100% {
    transform: translateX(-25%);
  }
}
body {
  padding-top: 40px; /* ƒë·ªÉ n·ªôi dung kh√¥ng b·ªã che */
}

</style>

<body class="bg-gradient-to-br from-indigo-100 via-purple-100 to-pink-100 flex h-screen">

  <!-- Khu v·ª±c game -->
  <div class="flex-1 flex items-center justify-center p-4">
    <canvas id="gameCanvas" width="800" height="800" 
      class="bg-white shadow-2xl rounded-2xl border border-gray-200 transition-transform duration-300 hover:scale-[1.01]"></canvas>
  </div>

  <!-- Sidebar -->
  <div class="w-80 bg-white border-l border-gray-200 p-6 flex flex-col space-y-6 shadow-2xl rounded-l-3xl">
    <!-- Form ph√≤ng ch∆°i -->
    <div>
      <h2 class="text-2xl font-extrabold mb-4 text-indigo-600">üéÆ Ph√≤ng ch∆°i</h2>

      <label class="block mb-1 font-medium text-gray-700">M√£ ph√≤ng</label>
      <input id="roomInput" class="w-full border rounded-lg p-2 mb-3 focus:ring-2 focus:ring-indigo-400 outline-none" placeholder="Nh·∫≠p m√£ ph√≤ng" />

      <label class="block mb-1 font-medium text-gray-700">T√™n b·∫°n</label>
      <input id="nameInput" class="w-full border rounded-lg p-2 mb-3 focus:ring-2 focus:ring-indigo-400 outline-none" placeholder="Nh·∫≠p t√™n" />

      <label class="block mb-1 font-medium text-gray-700">M√†u m·ª±c</label>
      <input type="color" id="colorInput" class="w-full border rounded-lg p-2 mb-3 cursor-pointer" value="#ff0000" />

      <label class="block mb-1 font-medium text-gray-700">K√Ω hi·ªáu</label>
      <input id="symbolInput" class="w-full border rounded-lg p-2 mb-3 focus:ring-2 focus:ring-indigo-400 outline-none" placeholder="V√≠ d·ª•: X" maxlength="1" />

      <!-- K√≠ch th∆∞·ªõc -->
      <div class="flex items-center space-x-2 mb-4">
        <input id="widthInput" type="number" class="border rounded-lg p-2 w-16 focus:ring-2 focus:ring-indigo-400 outline-none" value="5" min="2">
        <span class="text-gray-600">x</span>
        <input id="heightInput" type="number" class="border rounded-lg p-2 w-16 focus:ring-2 focus:ring-indigo-400 outline-none" value="5" min="2">
      </div>

      <!-- N√∫t -->
      <div class="flex space-x-3">
        <button onclick="createRoom()" class="flex-1 bg-gradient-to-r from-blue-500 to-blue-600 text-white font-semibold rounded-lg p-2 shadow hover:from-blue-600 hover:to-blue-700 transition">T·∫°o ph√≤ng</button>
        <button onclick="joinRoom()" class="flex-1 bg-gradient-to-r from-green-500 to-green-600 text-white font-semibold rounded-lg p-2 shadow hover:from-green-600 hover:to-green-700 transition">Tham gia</button>
      </div>

      <button onclick="startGame()" id="startBtn" class="mt-3 hidden w-full bg-gradient-to-r from-purple-500 to-purple-600 text-white font-semibold rounded-lg p-2 shadow hover:from-purple-600 hover:to-purple-700 transition">B·∫Øt ƒë·∫ßu ch∆°i</button>
    </div>

    <!-- Tr·∫°ng th√°i -->
    <div class="bg-gray-50 p-3 rounded-lg border text-center">
      <p id="status" class="text-gray-600">Ch∆∞a tham gia ph√≤ng</p>
      <p id="turnInfo" class="text-lg font-bold text-indigo-600"></p>
      <p id="timer" class="text-red-500 font-bold"></p>
    </div>

    <!-- B·∫£ng x·∫øp h·∫°ng -->
    <div>
      <h2 class="text-2xl font-extrabold mb-3 text-pink-600">üèÜ B·∫£ng x·∫øp h·∫°ng</h2>
      <table class="w-full border rounded-lg overflow-hidden shadow text-center" id="scoreboard">
        <thead>
          <tr class="bg-indigo-100 text-gray-700">
            <th class="p-2">T√™n</th>
            <th class="p-2">K√Ω hi·ªáu</th>
            <th class="p-2">ƒêi·ªÉm</th>
          </tr>
        </thead>
        <tbody class="divide-y"></tbody>
      </table>
    </div>
  </div>

</body>
</html>
